# ═══════════════════════════════════════════════════════
# Prometheus — Eventra Platform Scrape Configuration
# ═══════════════════════════════════════════════════════

global:
  scrape_interval: 15s
  evaluation_interval: 15s
  scrape_timeout: 10s

rule_files:
  - "alerts.yml"

scrape_configs:
  # ── Eventra Backend (Spring Boot Actuator) ──────────
  - job_name: 'eventra-backend'
    metrics_path: '/actuator/prometheus'
    scrape_interval: 15s
    static_configs:
      - targets: ['eventra-backend:8080']
        labels:
          application: 'eventra'
          environment: 'docker'

  # ── Prometheus self-monitoring ──────────────────────
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # ── RabbitMQ (management plugin metrics) ────────────
  # RabbitMQ management exposes Prometheus metrics at /api/metrics
  # Requires rabbitmq_prometheus plugin (included in management image)
  # Uncomment when rabbitmq_prometheus plugin is enabled:
  # - job_name: 'rabbitmq'
  #   metrics_path: '/metrics'
  #   static_configs:
  #     - targets: ['rabbitmq:15692']
